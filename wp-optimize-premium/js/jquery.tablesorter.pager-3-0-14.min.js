!function(e){e.extend({tablesorterPager:new function(){function t(t){e(t.cssPageDisplay,t.container).val(t.page+1),e(t.cssPageDisplayCount,t.container).text(t.seperator+t.totalPages)}function a(e,t){var a=e.config;a.size=t,a.totalPages=Math.ceil(a.totalRows/a.size),a.pagerPositionSet=!1,c(e),n(e)}function n(t){var a=t.config;if(!a.pagerPositionSet&&a.positionFixed){var a=t.config,n=e(t);n.offset&&a.container.css({top:n.offset().top+n.height()+"px",position:"absolute"}),a.pagerPositionSet=!0}}function o(e){var t=e.config;t.page=0,c(e)}function i(e){var t=e.config;t.page=t.totalPages-1,c(e)}function r(e){var t=e.config;t.page++,t.page>=t.totalPages-1&&(t.page=t.totalPages-1),c(e)}function s(e){var t=e.config;t.page--,t.page<=0&&(t.page=0),c(e)}function c(e){var t=e.config;t.page<0&&(t.page=0),t.page>=t.totalPages&&(t.page=t.totalPages-1),g(e)?f(e):p(e,t.rowsCopy)}function p(a,o){var r=a.config,s=e(a.tBodies[0]);if(e.tablesorter.clearTableBody(a),g(a))for(var c in o.data)s.append(l(o.id_key,o.data[c],o.columns));else{var p=o.length,f=r.page*r.size,u=f+r.size;u>o.length&&(u=o.length);for(var c=f;c<u;c++)for(var d=o[c],p=d.length,h=0;h<p;h++)s[0].appendChild(d[h])}n(a,s),e(a).trigger("applyWidgets"),r.page>=r.totalPages&&r.totalPages>0&&i(a),t(r)}function g(e){var t=e.config;return"object"==typeof t.dataSource&&t.dataSource.hasOwnProperty("fetch")}function f(t){var a=t.config;e(t).trigger("load_start"),a.dataSource.fetch(a.page*a.size,a.size).done(function(n){try{n=JSON.parse(n)}catch(o){return void alert(wpoptimize.error_unexpected_response)}e(t).trigger("load_end",n),n&&n.hasOwnProperty("errors")&&n.errors.length?alert(wpoptimize.error_unexpected_response):(a.totalRows=parseInt(n.result.total),a.totalPages=Math.ceil(a.totalRows/a.size),p(t,n.result))}).fail(function(){alert(wpoptimize.error_unexpected_response)})}function l(e,t,a){var n,o=[],i="";o.push(['<td><input type="checkbox" value="',t[e],'"></td>'].join(""));for(n in a)a.hasOwnProperty(n)&&(i=t.hasOwnProperty(n)?"object"==typeof t[n]?['<a href="',t[n].url,'" target="_blank">',t[n].text,"</a>"].join(""):t[n]:"",o.push(["<td>",i,"</td>"].join("")));return["<tr>",o.join(),"</tr>"].join("")}this.appender=function(e,t){var a=e.config;g(e)?f(e):(a.rowsCopy=t,a.totalRows=t.length,a.totalPages=Math.ceil(a.totalRows/a.size),p(e,t))},this.defaults={size:10,page:0,totalRows:0,totalPages:0,container:null,cssNext:".next",cssPrev:".prev",cssFirst:".first",cssLast:".last",cssPageDisplay:".pagedisplay",cssPageDisplayCount:".pagedisplay-count",cssPageSize:".pagesize",seperator:"/",positionFixed:!0,appender:this.appender,dataSource:null},this.construct=function(t){return this.each(function(){config=e.extend(this.config,e.tablesorterPager.defaults,t);var n=this,p=config.container;e(this).trigger("appendCache"),config.size=parseInt(e(".pagesize",p).val()),e(this).on("reload",function(){c(n)}),e(config.cssPageDisplay,config.container).on("change paste keyup",function(t){t.preventDefault();var a=e(this),o=0;""==a.val()||isNaN(parseInt(a.val()))||(o=parseInt(a.val()),n.config.page=o-1,c(n))}),e(config.cssFirst,p).click(function(){return o(n),!1}),e(config.cssNext,p).click(function(){return r(n),!1}),e(config.cssPrev,p).click(function(){return s(n),!1}),e(config.cssLast,p).click(function(){return i(n),!1}),e(config.cssPageSize,p).change(function(){return a(n,parseInt(e(this).val())),!1})})}}}),e.fn.extend({tablesorterPager:e.tablesorterPager.construct})}(jQuery),TableSorter_DataSource=function(e){function t(t,a){e[t]=a}function a(t,a){return e.offset="undefined"==typeof t?e.offset:t,e.limit="undefined"==typeof a?e.limit:a,wp_optimize_send_command_admin_ajax("preview",e)}return{set_option:t,fetch:a}};